<!doctype html>
<html lang="">
<head>
  <meta charset="utf-8">
  <meta name="description" content="">
  <meta name="viewport">
  <title><%= appname %></title>


  <!-- build:css styles/vendor.css -->
  <!-- bower:css -->
  <!-- endbower -->
  <!-- endbuild -->

  <!-- build:css styles/main.css -->
  <link rel="stylesheet" href="../bower_components/bulma/css/bulma.css">
  <link rel="stylesheet" href="styles/main.css">
  <!-- endbuild -->
</head>
<body>

<!--[if IE]>
<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade
  your browser</a> to improve your experience.</p>
<![endif]-->

<div class="container">
  <section class="section">
    <div class="container">
      <h1 class="title">NETPIE</h1>
      <h2 class="subtitle">
        blah blah blah
      </h2>
      <div class="notification">
        <p>appName: <%= appname %></p>
        <p>appId: <%= appId %></p>
        <p>appKey: <%= appKey %></p>
        <p>appSecret: <%= appSecret %></p>
      </div>

      <div class="field">
        <label class="label">Topic</label>
        <div class="control">
          <input id="topic-input" class="input" type="text" value="/gearname/topic" placeholder="/gearname/topic">
        </div>
      </div>

      <div class="field">
        <label class="label">Message</label>
        <div class="control">
          <input id="payload-input" class="input" type="text" placeholder="payload">
        </div>
      </div>

      <div class="field is-grouped">
        <div class="control">
          <button id='publish-button' class="button is-primary">Publish</button>
        </div>
      </div>

    </div>
  </section>

  <section class="section">
    <div class="container">
      <article class="message">
        <div class="message-header">
          <p class="message-header-text">Message</p>
        </div>
        <div class="message-body">
          <p class="title" id='incoming-messages'>/p>
        </div>
      </article>
    </div>
  </section>

</div>


<!-- build:js scripts/vendor.js -->
<script src="../bower_components/jquery/dist/jquery.min.js"></script>
<!-- bower:js -->
<!-- endbower -->
<!-- endbuild -->

<!-- build:js scripts/main.js -->
<script src="libs/microgear.js"></script>
<script src="scripts/config.js"></script>
<script src="scripts/main.js"></script>
<!-- endbuild -->


<script type="text/javascript">
  jQuery('document').ready(function ($) {
    connect_netpie()
    $('#publish-button').click(function () {
      var topic = $('#topic-input').val()
      var payload = $('#payload-input').val()
      console.log('DEBUG: ', topic, payload)
      microgear.publish(topic, payload)
    })
  })
</script>
</body>
</html>
